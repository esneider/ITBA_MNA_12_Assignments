\documentclass[%
    %draft,
    %submission,
    %compressed,
    final,
    %
    %technote,
    %internal,
    %submitted,
    %inpress,
    %reprint,
    %
    %titlepage,
    notitlepage,
    %anonymous,
    narroweqnarray,
    inline,
    twoside,
    invited
    ]{lib/ieee}

\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{moreverb}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{fancybox}
\usepackage{float}
\usepackage{fancyvrb}
\usepackage{subfigure}

\newcommand{\latexiie}{\LaTeX2{\Large$_\varepsilon$}}

%\usepackage{ieeetsp}    % if you want the "trans. sig. pro." style
%\usepackage{ieeetc}    % if you want the "trans. comp." style
%\usepackage{ieeeimtc}    % if you want the IMTC conference style

% Use the `endfloat' package to move figures and tables to the end
% of the paper. Useful for `submission' mode.
%\usepackage {endfloat}

% Use the `times' package to use Helvetica and Times-Roman fonts
% instead of the standard Computer Modern fonts. Useful for the
% IEEE Computer Society transactions.
%\usepackage{times}
% (Note: If you have the commercial package `mathtime,' (from
% y&y (http://www.yandy.com), it is much better, but the `times'
% package works too). So, if you have it...
%\usepackage {mathtime}

% for any plug-in code... insert it here. For example, the CDC style...
%\usepackage{ieeecdc}

\begin{document}

%----------------------------------------------------------------------
% Title Information, Abstract and Keywords
%----------------------------------------------------------------------
\title[PageRank]{%
       PageRank}

% format author this way for journal articles.
% MAKE SURE THERE ARE NO SPACES BEFORE A \member OR \authorinfo
% COMMAND (this also means `don't break the line before these
% commands).
\author[Sneidermanis, Sturla]{Darío Sneidermanis, Martín Sturla\\
\\\textbf{19 de Abril de 2012}
}



\titletext{Métodos\ Numéricos\ Avanzados,\ ITBA\ -\ 19\ de\ abril\ de\ 2012}
\lognumber{}
\pubitemident{}
\loginfo{19 de Abril, 2012.}
\firstpage{1}

\confplacedate{Buenos Aires, Argentina, 19 de Abril, 2012}

\maketitle

\begin{abstract}
Se analizan y compara el desempeño de la implementación clásica del algoritmo de PageRank, con el método de las potencias, y una implementación
alternativa que se empezó a estudiar recientemente, usando sistemas lineales.
\end{abstract}

\begin{keywords}
PageRank, motores de búsqueda, cadenas de Markov, método de las potencias, autovectores.
\end{keywords}

%----------------------------------------------------------------------
% SECTION I: Introduccion%----------------------------------------------------------------------
\section{Introducción}
Con el inicio de las telecomunicaciones masivas por Internet a principio de los 90' y su rápido crecimiento, nació la necesidad de
crear un índice de los sitios web. Estos índices eran usados por los motores de búsqueda, y acompañaron el crecimiento del tráfico
de Internet. En 1994, World Wide Web Worm poseía un índice de unos 110.000 sitios, y era consultado unas 1500 veces diariamente. Ya en
1997, los motores de búsqueda contaban con índices con una cantidad de sitios que variaba desde 2 hasta 100 millones, y algunos eran consultados
unas 20 millones de veces diariamente. Estos índices eran mantenidos por humanos y por lo tanto, además de ser posiblemente subjetivos,
no parecían ser lo suficientemente escalables como para poder acompañar el rápido crecimiento del tráfico por Internet. \\

En 1998, habiendo previsto índices en el orden
de los miles de millones de sitios para el fin del milenio, dos estudiantes de Stanford, Sergey Brin y Lawrance Page, publicaron un paper titulado
\textit{"The Anatomy of a Large-Scale Hypertextual Web Search Engine"} que explora el problema mencionado anteriormente y ofrece una solución; un
algoritmo computable para indexar sitios web según su importancia, conocido como \textit{PageRank}. Estos estudiantes crearon el conocido motor de
búsqueda llamado \textit{Google} utilizando este algoritmo. \\

Se comienza el paper con una exposición y modelado del problema en la sección II, seguido del desarrollo matemático básico en la sección III.
En la sección IV se exponen los dos métodos de solución y se comparan experimentalmente en la sección V.

%----------------------------------------------------------------------
% SECTION II: Que es PageRank?
%----------------------------------------------------------------------

\section{Modelado del problema}

\par El conjunto de los sitios web puede ser representado como un grafo, donde cada sitio es un nodo. Existe una arista dirigida entre dos nodos si
desde el primer sitio hay un hipervínculo al segundo. A cada uno de los nodos se le asigna un valor representando la probabilidad de que
una cierta persona navegando por Internet esté observando dicho sitio, denominado el \textit{PageRank} del sitio.
En cada época o iteración, dicha persona puede decidir quedarse en ese sitio definitivamente o desplazarse a otro sitio por medio de un hipervínculo
(con probabilidad $d$, llamado factor de amortiguamiento).
Nótese que el factor de amortiguamiento no puede ser representado como un lazo, ya que una vez que se decide quedarse en un sitio, el proceso finaliza.\\

En vista de dichas propiedades, este grafo puede ser visto como una cadena de Markov: se toman las probabilidades iniciales de
estar en cualquier nodo uniformemente, y las probabilidades de abrir un hipervínculo de un mismo nodo también uniformemente. Además no existen
estados absorbentes; si un sitio no tiene hipervínculos, se asume que un usuario podría ingresar el nombre de un nuevo sitio en el navegador, por lo que
se generan aristas desde dicho estado absorbente a todos los demás estados del grafo. Debido a que un usuario podría hacer esto incluso en estados
que no son abosrbentes, se suele agregar dichas aristas en todos los nodos, con una probabilidad residual igual al factor de amortiguamiento.\\

El vector de probabilidades al que converge dicha cadena de Markov representa el peso o importancia de cada sitio.

\section{Marco algebraico}

\par Para empezar, se debe calcular el valor del \textit{PageRank} de un nodo $p_{k}$. Dicho valor se calcula con la suma de la probabilidad de que el usuario
decida quedarse indefinidamente en el nodo, y aquella asignada a que el usuario haya llegado al sitio a través de un hipervínculo. La probabilidad
de haber navegado por un hipervínculo, es decir el factor de amortiguamiento $d$, vale aproximadamente $0,85$ (establecido empíricamente [1]).

\begin{equation}\label{pranknode}
PR(p_i) = \frac{1-d}{N} + d \sum_{p \in M_{p_{i}}} \frac{PR(p)}{L(p)}
\end{equation}

Donde $L(p)$ es el grado de salida del nodo $p$, $N$ es la cantidad total de nodos, y $M_{p_i}$ es el conjunto de los nodos directamente alcanzables
desde $p_i$.\\

Aplicando la ecuación \eqref{pranknode} a todos los nodos y exigiendo que el \textit{PageRank} de cada nodo converja a un valor,
se obtiene una nueva ecuación en forma matricial:

\begin{equation}\label{pranksolution}
R = \begin{pmatrix}
(1-d)/N \\ (1-d)/N \\ \vdots \\ (1-d)/N
\end{pmatrix} + dMR
\end{equation}

Donde $R$ es el vector de \textit{PageRanks} y $M$ es la matrix de adyacencia del grafo:

\begin{equation}\label{M}
M=\begin{pmatrix}
l(p_{1},p_{1}) & l(p_{1},p_{2}) & \cdots & l(p_{1},p_{N}) \\
l(p_{2},p_{1}) & \ddots & & \vdots \\
\vdots & & l(p_{i}, p_{j}) & \\
l(p_{N},p_{1}) & \cdots &  & l(p_{N},p_{N})
\end{pmatrix}
\end{equation}

Con $l(p_{i},p_{j})$ siendo el peso de la arista desde nodo $p_{i}$ hacia el nodo $p_{j}$, definido como $0$ si dicha arista no existe.\\

\section{Soluciones para el problema de calcular el PageRank}

Se define la matriz $\widehat{M}$ como:

\begin{equation}\label{mhat}
\widehat{M} = \frac{1-d}{N}E + dM
\end{equation}

Donde $E$ es una matriz con todos unos.\\

Fácilmente se puede ver que la ecuación \eqref{pranksolution} es equivalente a la siguiente:

\begin{equation}\label{eigenr}
R = \widehat{M}R
\end{equation}

\[
    R = \frac{1-d}{N}ER + dMR
\]

\[
    R = \begin{pmatrix}
            (1-d)/N \\ (1-d)/N \\ \vdots \\ (1-d)/N
        \end{pmatrix} + dMR
\]

($R \cdot \mathbf 1 = 1$, pues $R$ es una distribucion de probabilidades)\\

La cadena de Markov con matriz de transición $\widehat{M}$ es irreducible y ergódica (todas las transiciones posibles tienen probabilidad mayor
que $0$), por lo tanto R existe y es único.

\subsection{Método de las potencias}

De la ecuación \eqref{eigenr} se puede deducir que la solución $R$ no es más que el autovector dominante con autovalor $1$ de la matriz $\widehat{M}$.
Dado que las filas y columnas de
$\widehat{M}$ suman $1$ (es estocástica), por círculos de Gershgorin el módulo de todos los autovalores deberá ser menor o igual a $1$, por lo que el autovector
es dominante. El autovalor será único si existe una única distribución que satisface la ecuación \eqref{eigenr}, lo cual es equivalente a exigir
que $Rg\left(\widehat{M}-I\right) = N-1$ y no menor.Esto trae a la mesa el interesante trade-off de tiempo versus factor de amortiguamiento, que es un dato empírico. Sería interesante analizar
Si se cumple, se puede calcular $R$ con el método de las potencias. Cabe destacar que como
$R$ es una distribución de probabilidades, el autovector debe estar normalizado.\\

El método de las potencias
consiste en tomar un vector $v(0)$ inicializado
arbitrariamente e iterar según la regla:
\begin{equation}
v(t+1) = \widehat{M}v(t)
\end{equation}
Normalizando $v(t+1)$ en cada paso, hasta que se cumpla:
\begin{equation}
\left| v(t+1) - v(t) \right| < \epsilon
\end{equation}
Donde $\epsilon$ es un error adecuado. El método de las potencias converge al autovalor dominante siempre y cuando la proyección del
vector $v(0)$ a este último no sea nula.\\

El ritmo asintótico de convergencia de este método está gobernado por el autovalor subdominante. Este autovalor está acotado
superiormente por $d$, el factor de amortiguamiento [4]. En la figura 1, se puede ver que para $0.5 \leq d \leq 0.9$, el
factor de amortiguamiento afecta linealmente el tiempo de ejecución del algoritmo.
Esto trae a la mesa el interesante trade-off de tiempo versus factor de amortiguamiento, que es un dato empírico. Habría que
 analizar cuánto cambia la solución al variar $d$.

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.5\textwidth]{img/d_pm.png} % [scale=0.75]
    \caption {Gráfico del tiempo de ejecución del método de las potencias en función de el factor de amortiguamiento, para un grafo de 100 sitios.}
\end{figure}

\subsection{Sistema lineal}

De \eqref{pranksolution} se deduce:

\begin{equation}
    R (I - dM) = \begin{pmatrix}
                     (1-d)/N \\ (1-d)/N \\ \vdots \\ (1-d)/N
                 \end{pmatrix}
\end{equation}

Sistema lineal de la forma $Ax = b$ con $A = (I - dM)$, $x = R$, $b = (1-d)/N* \mathbf 1$, que puede ser resuelto con, por ejemplo,
 eliminación de Gauss-Jordan o el método de Jacobi.\\

Nota: se podría usar también $R(I-d\widehat{M}) = 0$, pero la matriz $\widehat{M}$ es mucho más densa que la matriz $M$, que es, en
 general, algo deseable.

\section{Comparación y conclusiones}

Los grafos sobre los que se probaron los algoritmos fueron genreados proceduralmente, con factores aleatorios,
teniendo cuidado en conservar las características de un grafo web real (a saber, la cantidad total de links es
$\Theta($cantidad de sitios$)$).\\

Se implementarion 3 algoritmos: el método de las potencias, la resolución del sistema lineal con el método de Jacobi, y la resolución
 del sistema lineal con el método que usa nativamente octave.

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.5\textwidth]{img/octave_jacobi_pm.png} % [scale=0.75]
    \caption {Gráfico del tiempo de ejecución de los tres algoritmos para grafos web de 20 a 1000 sitios.}
\end{figure}

Es interesante ver (figura 2) que la forma clásica de resolverlo y la resolución por sistema lineal (octave), tienen tiempos bastante similares;
 variando, aparentemente, por tan solo una constante multiplicativa pequeña.
Además, se pueden añadir varias mejoras a ambos algoritmos aún [4] (esta fue una implementacion de los algoritmos básicos), por lo que
 no hay un ganador claro.
Siendo así muy prometedor el nuevo encare por sistemas lineales de ecuaciónes, que todavía no está tan explorado.

%----------------------------------------------------------------------
% The bibliography. This bibliography was generated using the following
% two lines:
%\bibliographystyle{IEEEbib}
%\bibliography{ieeecls}
% where, the contents of the ieeecls.bib file was:
%
%@book{lamport,
%        AUTHOR = "Leslie Lamport",
%         TITLE = "A Document Preparation System: {\LaTeX} User's Guide
%                  and Reference Manual",
%       EDITION = "Second",
%     PUBLISHER = "Addison-Wesley",
%       ADDRESS = "Reading, MA",
%          YEAR = 1994,
%          NOTE = "Be sure to get the updated version for \LaTeX2e!"
%}
%
%@book{goossens,
%        AUTHOR = "Michel Goossens and Frank Mittelbach and
%                  Alexander Samarin",
%         TITLE = "The {\LaTeX} Companion",
%     PUBLISHER = "Addison-Wesley",
%       ADDRESS = "Reading, MA",
%          YEAR = 1994,
%}
%
% The ieeecls.bbl file was manually included here to make the distribution
% of this paper easier. You need not do it for your own papers.

\newpage

\section{References}

    [1] Brin, S.; Page, L. (1998). \emph{The anatomy of a large-scale hypertextual Web search engine.}

    [2] Page, L. (1997). \emph{PageRank: Bringing Order to the Web.}

    [3] Bianchini, M.; Gori, M.; Scarselli, F. (2005). \emph{Inside PageRank.}

    [4] Langville, A.; Meyer, C. (2004). \emph{Deeper Inside PageRank.}


\end{document}

